{"pageProps":{"tag":"splunk","posts":[{"localPath":"/home/f440/go/src/github.com/f440/f440.github.com/content/2013-03-17-logging-with-splunk-storm.markdown","path":"blog/2013/03/17/logging-with-splunk-storm","layout":"post","title":"イベント管理にSplunk Stormを使ってみる","createdAt":"2013-03-17T12:17:00.000Z","kind":"article","comments":true,"tags":["logging","visualization","splunk"],"content":"\n[Splunk] はおそらくイベント・ログ管理のツールとしてはおそらくもっとも有名で、日本でも販売展開しているので知っている人も多いかと思う。その splunk が [Splunk Storm] というサービスを始めている。試しに使ってみたのでその感想。\n\n<!-- more -->\n\n料金に応じて、格納可能なデータの容量が増える課金体系。無料でも1GBまで利用可能。\n\nデータの取り込みは以下の方法が提供されている:\n\n  - Syslog, Rsyslog, Syslog-ng などから転送\n  - TCP/UDP を使って直接登録\n    - `cat some_file.log | nc endpoind_hostname port` で登録可能\n  - HTTP API\n  - forwarder と呼ばれるクライアントプログラム\n    - ログの読み取りなども可能\n  - ファイルアップロード\n\n試しにアカウントをとってApacheのログ形式のデータをncでがんがん取り込んでみたところ、1GB を超えたところでもうこれ以上追加できないとのメールが届いた。結果、200万件以上のデータが登録できていた。\n\n複雑な検索式を使って特定の条件に合うレコードを弾き出したり、図示することができる。たとえば、ステータスコードでグルーピングしたグラフを表示するには、以下の検索式を指定する。\n\n    sourcetype=\"access_combined\" status=\"*\" | timechart count by status\n\nリアルタイムで計算しているらしく、新しい時間帯から古い時間帯へとどんどんグラフが追加されていく。\n\n![httpstatus](/images/2013-03-17-logging-with-splunk-storm/httpstatus.png)\n\nさすがというか、よくできている。\n\n[Splunk]: http://www.splunk.com/\n[Splunk Storm]: https://www.splunkstorm.com/storm/\n"}]},"__N_SSG":true}