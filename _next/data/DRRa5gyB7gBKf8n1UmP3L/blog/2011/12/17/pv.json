{"pageProps":{"post":{"localPath":"/home/f440/go/src/github.com/f440/f440.github.com/content/2011-12-17-pv.markdown","path":"2011/12/17/pv","layout":"post","title":"プログレスバーを簡単に表示できるコマンド pv","createdAt":"2011-12-16T15:00:00.000Z","kind":"article","comments":true,"tags":["unix","pv"],"content":"<p>プログレスバーを簡単に表示できる <code>pv</code> について説明する。</p>\n<!-- more -->\n<h2>インストール方法</h2>\n<p>自分の環境(debian 6.0.3)だと <code>apt</code>でインストール出来る。RHEL系なら<a href=\"http://pkgs.repoforge.org/pv/\">ここ</a>かな。</p>\n<h2>使い方</h2>\n<p>端的に言うと、「cat ＋ 標準エラー出力にプログレスバー」という動きを取る。</p>\n<pre><code>f440@abhoth[10]:~$ yes | pv >/dev/null\n 529MB 0:00:08 [67.2MB/s] [       &#x3C;=>                                         ]\n</code></pre>\n<p>8秒で合計529MB、秒間67.2MBくらいで「y」の文字が <code>pv</code> を通り抜けてるのがわかる。 <code>-l</code>オプションをつけると行モードになり、転送量ではなく転送行数を調べられる。</p>\n<pre><code>f440@abhoth[10]:~$ yes | pv -l >/dev/null\n 435k 0:00:10 [45.9k/s] [          &#x3C;=>                                        ]\n</code></pre>\n<p>10秒で435行、秒間45900行くらいが通り抜けてるのがわかる。</p>\n<p>他にもおもしろいオプションとして <code>-L</code> っていうのがあって、パイプから出てく流量を制限することが出来る。</p>\n<h2>用途</h2>\n<p><code>mysqldump</code> とか <code>mysql</code>にくっつけてダンプ、リストアの完了時刻を予想する、とかかな。</p>\n<p>Webで見てると、<code>nc</code> とか <code>tcpdump</code> とかと組み合わせてる例がある。</p>\n<p>自分で作ったコマンドとかに、簡単に進行状況表示がくっつけられるのは便利。</p>\n"}},"__N_SSG":true}