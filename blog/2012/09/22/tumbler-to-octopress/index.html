<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>TumblerからOctopressへの移行 - aptheia.info</title><link rel="alternate" type="application/rss+xml" title="apatheia.info" href="/atom.xml"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/3c128f59c2ecef969dbc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3c128f59c2ecef969dbc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-1a8a258926ecde76681b.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-a9acf05574b3448968f1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d96712b144c157b4cbfa.js" defer=""></script><script src="/_next/static/chunks/915-c287d7adb8a31cf4da35.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-c134caf83809c687960e.js" defer=""></script><script src="/_next/static/PHKJ2Dzu0oDEBCrRGxDFE/_buildManifest.js" defer=""></script><script src="/_next/static/PHKJ2Dzu0oDEBCrRGxDFE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header><div id="site-title"><h1><a href="/">apatheia.info</a></h1></div><nav><ul><li><a href="/">Home</a></li><li><a href="/atom.xml">RSS</a></li></ul></nav></header><main><article><h1>TumblerからOctopressへの移行</h1><p id="article-info">Published on <!-- -->2012.09.22<!-- --> <span><a href="/blog/categories/octopress/">octopress</a> </span></p><div><p>Tumblerでブログ書いていたけど、ローカルで記事書く => フォームに貼り付け => プレビューのサイクルが結構面倒くさいな、と常々思っていたので、Octopressに移行した。</p>
<p>ホスティングには <a href="http://pages.github.com/">Github Pages</a> を利用している。</p>
<!-- more -->
<h2>手順</h2>
<h3>設定</h3>
<pre><code>$ git clone git://github.com/imathis/octopress.git octopress

# テーマ入れ替える    
$ git clone git://github.com/tommy351/Octopress-Theme-Slash.git .themes/slash
$ rake 'install[slash]' # zsh だとクォートなりエスケープするなりしないと、[, ] がメタ文字として解釈される
# .themes/slash/{source,sass} がルートディレクトリにコピーされる
</code></pre>
<p>このままだと header の canonical が設定されないかったので、同梱テンプレート <code>.themes/classic/source/_includes/head.html</code> を参考に <code>./source/_includes/head.html</code> をちょっとといじった。</p>
<h3>Tumbler の記事をインポート</h3>
<p><a href="http://tsurayogoshi.tumblr.com/archive">ブログの過去記事</a>を全部インポートする
( 参考: <a href="http://blog.assimov.net/blog/2012/03/24/tumblr-to-octopress-powered-by-jekyll-and-markdown/">Goodbye Tumblr. Hello, Octopress Powered by Jekyll and Markdown!</a> )</p>
<pre><code>$ wget -O source/tumblr.rb https://raw.github.com/stephenmcd/jekyll/master/lib/jekyll/migrators/tumblr.rb
$ vim source/tumblr.rb # format="md" => format="markdown" に書き換え
$ ruby -rubygems -e 'require "./source/tumblr"; Jekyll::Tumblr.process("http://tsurayogoshi.tumblr.com", format="markdown", grab_images=true)'
$ mv _posts/tumblr/* source/_posts/
$ mv post source/
</code></pre>
<p>後は細かい調整</p>
<ul>
<li>画像のパスが tumblr を参照しているので、全部ダウンロードして <code>source/images</code>
以下に保存</li>
<li>記事のメタデータ部分
<ul>
<li><code>comments: true</code>を追加</li>
<li><code>tags</code> を <code>categories</code> に書き換え。</li>
</ul>
</li>
<li>各種外部サイト向けパーツの設定</li>
</ul>
<p><code>source/post</code> には、tumbler と同じURLでアクセスしたとき、移行後のコンテンツにアクセスするリダイレクト設定が入っている。tumbler の頃からカスタムドメインを使っていた場合は、後述のドメイン設定で前と同じドメインにすればいい。</p>
<h3>ドメインの設定</h3>
<p>独自ドメインを使う場合、source/ 以下に CNAME というファイルを作り、そこにドメインを書いておく。その後、指定の IP アドレスに名前を向ける。</p>
<p>何度かIPアドレスが変更になっているみたいで、別のIPアドレスを利用した説明がネットに残っているけど、古いものだとカスタムドメインが使えるけどusername.github.comからのカスタムドメインへのリダイレクトが有効にならなかったりするので、ちゃんと
<a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">公式の説明</a>のもの
を参照すること。</p>
<h3>Github Pages へデプロイ</h3>
<p><a href="http://octopress.org/docs/deploying/github/">ドキュメント</a>を読めばわかるので詳細は割愛。</p>
<p><code>source</code> ディレクトリの中身が <code>public</code> 以下に展開されて、ここがプレビュー領域となる。<code>public</code> の中身が <code>_deploy</code> にコピーされて、ここが Github Pages に pushされる。</p>
<p>git リポジトリのうち <code>master</code> ブランチがは公開用、<code>source</code> が編集用となる。ルーディレクトリに <code>source</code> ブランチ、公開用の <code>_deploy</code> ディレクトリに <code>maste</code> ブランチという二つのリポジトリが配置されることになる。</p>
<h2>感想</h2>
<p>vim で書く => すぐに確認 => github にデプロイ => 公開の流れは気持ちいい。tumblr の頃と同じく、markdown で書けるのもとても具合がいい。</p>
</div></article></main><footer><ul><li>Link:</li><li><a href="https://twitter.com/f440">Twitter</a></li><li><a href="https://github.com/f440">Github</a></li><li><a href="https://pinbaord.in/u:f440">Pinbaord</a></li></ul></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"localPath":"/home/f440/go/src/github.com/f440/f440.github.com/content/2012-09-22-tumbler-to-octopress.markdown","path":"2012/09/22/tumbler-to-octopress","layout":"post","title":"TumblerからOctopressへの移行","createdAt":"2012-09-22T08:28:00.000Z","kind":"article","comments":true,"tags":["octopress"],"content":"\u003cp\u003eTumblerでブログ書いていたけど、ローカルで記事書く =\u003e フォームに貼り付け =\u003e プレビューのサイクルが結構面倒くさいな、と常々思っていたので、Octopressに移行した。\u003c/p\u003e\n\u003cp\u003eホスティングには \u003ca href=\"http://pages.github.com/\"\u003eGithub Pages\u003c/a\u003e を利用している。\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003ch2\u003e手順\u003c/h2\u003e\n\u003ch3\u003e設定\u003c/h3\u003e\n\u003cpre\u003e\u003ccode\u003e$ git clone git://github.com/imathis/octopress.git octopress\n\n# テーマ入れ替える    \n$ git clone git://github.com/tommy351/Octopress-Theme-Slash.git .themes/slash\n$ rake 'install[slash]' # zsh だとクォートなりエスケープするなりしないと、[, ] がメタ文字として解釈される\n# .themes/slash/{source,sass} がルートディレクトリにコピーされる\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこのままだと header の canonical が設定されないかったので、同梱テンプレート \u003ccode\u003e.themes/classic/source/_includes/head.html\u003c/code\u003e を参考に \u003ccode\u003e./source/_includes/head.html\u003c/code\u003e をちょっとといじった。\u003c/p\u003e\n\u003ch3\u003eTumbler の記事をインポート\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"http://tsurayogoshi.tumblr.com/archive\"\u003eブログの過去記事\u003c/a\u003eを全部インポートする\n( 参考: \u003ca href=\"http://blog.assimov.net/blog/2012/03/24/tumblr-to-octopress-powered-by-jekyll-and-markdown/\"\u003eGoodbye Tumblr. Hello, Octopress Powered by Jekyll and Markdown!\u003c/a\u003e )\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ wget -O source/tumblr.rb https://raw.github.com/stephenmcd/jekyll/master/lib/jekyll/migrators/tumblr.rb\n$ vim source/tumblr.rb # format=\"md\" =\u003e format=\"markdown\" に書き換え\n$ ruby -rubygems -e 'require \"./source/tumblr\"; Jekyll::Tumblr.process(\"http://tsurayogoshi.tumblr.com\", format=\"markdown\", grab_images=true)'\n$ mv _posts/tumblr/* source/_posts/\n$ mv post source/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e後は細かい調整\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e画像のパスが tumblr を参照しているので、全部ダウンロードして \u003ccode\u003esource/images\u003c/code\u003e\n以下に保存\u003c/li\u003e\n\u003cli\u003e記事のメタデータ部分\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecomments: true\u003c/code\u003eを追加\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003etags\u003c/code\u003e を \u003ccode\u003ecategories\u003c/code\u003e に書き換え。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e各種外部サイト向けパーツの設定\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003esource/post\u003c/code\u003e には、tumbler と同じURLでアクセスしたとき、移行後のコンテンツにアクセスするリダイレクト設定が入っている。tumbler の頃からカスタムドメインを使っていた場合は、後述のドメイン設定で前と同じドメインにすればいい。\u003c/p\u003e\n\u003ch3\u003eドメインの設定\u003c/h3\u003e\n\u003cp\u003e独自ドメインを使う場合、source/ 以下に CNAME というファイルを作り、そこにドメインを書いておく。その後、指定の IP アドレスに名前を向ける。\u003c/p\u003e\n\u003cp\u003e何度かIPアドレスが変更になっているみたいで、別のIPアドレスを利用した説明がネットに残っているけど、古いものだとカスタムドメインが使えるけどusername.github.comからのカスタムドメインへのリダイレクトが有効にならなかったりするので、ちゃんと\n\u003ca href=\"https://help.github.com/articles/setting-up-a-custom-domain-with-pages\"\u003e公式の説明\u003c/a\u003eのもの\nを参照すること。\u003c/p\u003e\n\u003ch3\u003eGithub Pages へデプロイ\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"http://octopress.org/docs/deploying/github/\"\u003eドキュメント\u003c/a\u003eを読めばわかるので詳細は割愛。\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esource\u003c/code\u003e ディレクトリの中身が \u003ccode\u003epublic\u003c/code\u003e 以下に展開されて、ここがプレビュー領域となる。\u003ccode\u003epublic\u003c/code\u003e の中身が \u003ccode\u003e_deploy\u003c/code\u003e にコピーされて、ここが Github Pages に pushされる。\u003c/p\u003e\n\u003cp\u003egit リポジトリのうち \u003ccode\u003emaster\u003c/code\u003e ブランチがは公開用、\u003ccode\u003esource\u003c/code\u003e が編集用となる。ルーディレクトリに \u003ccode\u003esource\u003c/code\u003e ブランチ、公開用の \u003ccode\u003e_deploy\u003c/code\u003e ディレクトリに \u003ccode\u003emaste\u003c/code\u003e ブランチという二つのリポジトリが配置されることになる。\u003c/p\u003e\n\u003ch2\u003e感想\u003c/h2\u003e\n\u003cp\u003evim で書く =\u003e すぐに確認 =\u003e github にデプロイ =\u003e 公開の流れは気持ちいい。tumblr の頃と同じく、markdown で書けるのもとても具合がいい。\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2012","09","22","tumbler-to-octopress"]},"buildId":"PHKJ2Dzu0oDEBCrRGxDFE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>