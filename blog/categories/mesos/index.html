<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>tagged mesos - aptheia.info</title><link rel="alternate" type="application/rss+xml" title="apatheia.info" href="/atom.xml"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/3c128f59c2ecef969dbc.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3c128f59c2ecef969dbc.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-1a8a258926ecde76681b.js" defer=""></script><script src="/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/_next/static/chunks/main-a9acf05574b3448968f1.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d96712b144c157b4cbfa.js" defer=""></script><script src="/_next/static/chunks/915-c287d7adb8a31cf4da35.js" defer=""></script><script src="/_next/static/chunks/pages/blog/categories/%5Btag%5D-c38c66d576a52b73b44b.js" defer=""></script><script src="/_next/static/DRRa5gyB7gBKf8n1UmP3L/_buildManifest.js" defer=""></script><script src="/_next/static/DRRa5gyB7gBKf8n1UmP3L/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header><div id="site-title"><h1><a href="/">apatheia.info</a></h1></div><nav><ul><li><a href="/">Home</a></li><li><a href="/atom.xml">RSS</a></li></ul></nav></header><main><article><h1>Articles tagged &#x27;<!-- -->mesos<!-- -->&#x27;</h1><section style="margin-bottom:1em"><h2><a href="/blog/2013/05/03/create-mesos-rpm-using-fpm/">fpm で Mesos の RPM を作るまで</a></h2><span>2013.05.03</span> <span><a href="/blog/categories/packaging/">packaging</a> </span><span><a href="/blog/categories/mesos/">mesos</a> </span></section></article></main><footer><ul><li>Link:</li><li><a href="https://twitter.com/f440">Twitter</a></li><li><a href="https://github.com/f440">Github</a></li><li><a href="https://pinbaord.in/u:f440">Pinbaord</a></li></ul></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"tag":"mesos","posts":[{"localPath":"/home/f440/go/src/github.com/f440/f440.github.com/content/2013-05-03-create-mesos-rpm-using-fpm.markdown","path":"blog/2013/05/03/create-mesos-rpm-using-fpm","layout":"post","title":"fpm で Mesos の RPM を作るまで","createdAt":"2013-05-03T08:24:00.000Z","kind":"article","comments":true,"tags":["packaging","mesos"],"content":"\n[Mesos] をインストールするとき各マシンでビルドはしんどいので、[fpm] で Mesos の RPM を作ってインストールしている。ビルドからパッケージ作成までの作業ログを残しておく。\n\n\u003c!-- more --\u003e\n\n- [fpm] は Ruby の gem や Node.js の npm などのプログラミング言語のライブラリ、あるいは直接ディレクトリから RPM やら Deb やらのパッケージを作成するソフトウェア。\n- [Mesos] はクラスタ構成のリソースをよしなに管理するソフトウェア。\n  - 今回の話では具体的な使い方までは触れない\n\n## 手順\n\n作業環境は CentOS 6.4 x86\\_64。\n\n Ruby をインストール。\n\n    sudo yum install ruby.x86_64 rubygems ruby-devel.x86_64 rpm-build.x86_64\n\nfpm をインストール。\n\n    sudo gem install fpm --no-rdoc --no-ri\n\nMesos のソースをダウンロード、展開。\n\n    curl -LO http://ftp.meisei-u.ac.jp/mirror/apache/dist/incubator/mesos/mesos-0.10.0-incubating/mesos-0.10.0-incubating.tar.gz\n    tar xf mesos-0.10.0-incubating.tar.gz\n    cd mesos-0.10.0\n\nMesos のビルドに必要なパッケージをインストール。\n\n    sudo yum install gcc-c++.x86_64 patch.x86_64 python-devel.x86_64 \\\n      cppunit-devel.x86_64 java-1.6.0-openjdk-devel.x86_64\n\nビルド。今回は、configure のオプションで Redhat っぽい配置を指定している。`/opt/mesos` とか `/usr/local/mesos` に全部まとめたければ --prefix を使うなど、このあたりはお好みで。\n`make install` 時には書き込み可能な場所を DESTDIR で指定。説明中では、`/tmp/mesos` を利用している。\n\n    JAVA_HOME=/etc/alternatives/java_sdk ./configure \\\n      --bindir=/usr/bin --sbindir=/usr/sbin --libexecdir=/usr/libexec \\\n      --localstatedir=/var --libdir=/usr/lib64 --includedir=/usr/include \\\n      --datarootdir=/usr/share\n    make\n    make install DESTDIR=/tmp/mesos\n\nfpm でパッケージを作成。詳細は fpm --help を参照。注意点としては、`--description` は RPM のメタ情報 `description`, `summary` で兼用されるので、あまり長い情報を入れると `yum search` とかがごちゃごちゃすることになる。適度に切り詰めた方がいい。\n\n    fpm -s dir -t rpm \\\n      -v 0.10.0 \\\n      -n mesos \\\n      -C /tmp/mesos \\\n      -a x86_64 \\\n      --license \"ASL 2.0\" \\\n      --url \"http://incubator.apache.org/mesos/\" \\\n      --description \"Dynamic resource sharing for clusters\" \\\n      -d python-devel \\\n      -d java-1.6.0-openjdk-devel \\\n      .\n\nRPM ファイルのメタ情報やファイル一覧をチェック。\n\n    rpm -qpi mesos-0.10.0-1.x86_64.rpm\n    rpm -qpl mesos-0.10.0-1.x86_64.rpm\n\nあとは、できあがった RPM ファイルを他のマシンに持っていってインストール。\n\n    sudo yum install ./mesos-0.10.0-1.x86_64.rpm\n\n[Mesos]: http://incubator.apache.org/mesos/\n[fpm]: https://github.com/jordansissel/fpm\n"}]},"__N_SSG":true},"page":"/blog/categories/[tag]","query":{"tag":"mesos"},"buildId":"DRRa5gyB7gBKf8n1UmP3L","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>